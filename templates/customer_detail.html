{% extends 'base.html' %}
{% block content %}

<style>
.main-container {
    padding: 30px;
    animation: fadeIn 0.6s ease-in-out;
}

@keyframes fadeIn {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.bill-box {
    background: #ff66a3;
    padding: 10px 20px;
    border-radius: 20px;
    color: white;
    font-weight: bold;
}

.middle-section {
    display: flex;
    gap: 40px;
    margin-top: 30px;
}

.photo-box img {
    width: 220px;
    height: 220px;
    object-fit: cover;
    border-radius: 20px;
}

.note-box {
    flex: 1;
    background: white;
    padding: 20px;
    border-radius: 20px;
}

textarea {
    width: 100%;
    height: 140px;
    border-radius: 15px;
    padding: 10px;
}

.save-btn {
    background: #ff3399;
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 20px;
    cursor: pointer;
    margin-top: 10px;
}

.blouse-section {
    margin-top: 30px;
}

.blouse-grid {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.blouse-grid img {
    width: 90px;
    height: 90px;
    border-radius: 15px;
    object-fit: cover;
}

.date-section {
    margin-top: 30px;
    display: flex;
    gap: 40px;
}

.date-box {
    background: #ffe6f0;
    padding: 10px 20px;
    border-radius: 20px;
}
</style>

<div class="main-container">

    <div class="top-bar">
        <h2>{{ customer.name }} Folder</h2>
        <div class="bill-box">
            Bill Total = ₹ XXX
        </div>
    </div>

    <div class="middle-section">

        <div class="photo-box">
            {% if customer.photo %}
                <img src="{{ customer.photo.url }}">
            {% else %}
                <p>No Photo</p>
            {% endif %}
        </div>

        <div class="note-box">
            <h3>Note ✏</h3>

            <form method="POST">
                {% csrf_token %}
                <textarea name="note">{{ customer.note }}</textarea>
                <button type="submit" class="save-btn">Save Note</button>
            </form>
        </div>

    </div>

    <div class="blouse-section">
        <h3>Blouse Images</h3>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="file" name="blouse_image">
            <button type="submit" class="save-btn">Add</button>
        </form>

        <div class="blouse-grid">
            {% for blouse in customer.blouse_set.all %}
                <img src="{{ blouse.image.url }}">
            {% endfor %}
        </div>
    </div>

    <div class="date-section">
        <div class="date-box">
            Received Date: {{ customer.received_date }}
        </div>
        <div class="date-box">
            Delivery Date: {{ customer.delivery_date }}
        </div>
    </div>

</div>

{% endblock %}